(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{132:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),s=a(46),i=a.n(s),o=(a(59),a(7)),c=a(9),u=a(47),l=a(48),h=a(3),p=a(53),d=a(50),m=(a(60),a(51)),b=a(52),f=a(2),v=a.n(f),y=function(t){var e=t.startStatus,a=t.current;function r(e){var a=t.randomCoordinate(1),r=Object(b.a)(a,2),n="player"+r[0]+r[1];document.querySelector("#"+n).click()}var s,i=t.board.map((function(s){return s.map((function(s){var i=[];return i.push(v.a.cell),"player"===t.player&&e&&i.push(v.a.readonly),null!==s.shipNumber?("player"===t.player&&i.push(v.a.ship),1===s.hit&&i.push(v.a.hit)):1===s.hit&&i.push(v.a.ocean),n.a.createElement("div",{className:i.join(" "),key:s.id,id:t.player+s.id,onClick:function(){return function(n,s,i,o){if("computer"!==t.player||!1!==e){var c=!1;if(!e)!0===document.querySelector("#rotate").checked&&(c=!0);n.split("");var u=+n[0],l=+n[1];if(!0===e)"player"===t.player&&1===o&&r(),t.attack(u,l,s,i,t.player),0===o&&"computer"===t.player&&r();else{var h=t.place(t.ships[a],u,l,c);console.log(h),!0===h&&(t.updateCurrent(),a+1===t.ships.length&&!1===e&&t.start())}}else alert("Place your ships first!")}(s.id,s.shipNumber,s.shipIndex,s.hit)}})}))}));if(!e&&"player"===t.player){var o=Object(m.a)(t.ships);s=n.a.createElement("div",{className:v.a.settings},n.a.createElement("div",null,"Ship Queue: ",o.splice(a)),n.a.createElement("div",null,"Current Ship Length: ",t.ships[a]),n.a.createElement("div",{className:v.a.rotate},"Rotate:"," ",n.a.createElement("input",{id:"rotate",type:"checkbox",name:"rotate",value:"true"})))}return n.a.createElement("div",{className:v.a.Gameboard},n.a.createElement("div",null,t.player+" board"),n.a.createElement("div",{className:v.a.board},i),s)},k=a(49),g=a.n(k),S=function(t){var e=Array.from(Array(t),(function(){return 0})),a=!1;return{getLength:function(){return t},getStatus:function(){return e},hit:function(t){if(1===e[t])return"already damaged";e[t]=1,e.every(Boolean)&&(a=!0)},isSunk:function(){return!!a}}},_=function(t){for(var e=[],a=0;a<t;a++){e.push([]);for(var r=0;r<t;r++)e[a].push({id:"".concat(a).concat(r),shipNumber:null,hit:0,shipIndex:null})}return{get:function(){return e},placeShip:function(t,a,r,n,s){if(s)for(var i=a,o=0;i<a+t.getLength();i++,o++){var c=e[i][r];c.shipNumber=n,c.shipIndex=o}else for(var u=r,l=0;u<r+t.getLength();u++,l++){var h=e[a][u];h.shipNumber=n,h.shipIndex=l}},recieveAttack:function(t,a){return 1!==e[t][a].hit&&(e[t][a].hit=1,!0)}}},w=[5,4,3,3,2],C=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(t){var r;return Object(u.a)(this,a),(r=e.call(this,t)).state=a.initialState,r.newAttack=r.newAttack.bind(Object(h.a)(r)),r.newShip=r.newShip.bind(Object(h.a)(r)),r.updateCurrent=r.updateCurrent.bind(Object(h.a)(r)),r.startGame=r.startGame.bind(Object(h.a)(r)),r.checkWin=r.checkWin.bind(Object(h.a)(r)),r.reset=r.reset.bind(Object(h.a)(r)),r}return Object(l.a)(a,[{key:"newAttack",value:function(t,e,a,r,n){var s=g()(this.state[n].ships);null===a?(this.state[n].stats.misses.push({x:t,y:e}),this.state[n].board.recieveAttack(t,e)):(s[a].hit(r),this.state[n].stats.hits.push({x:t,y:e}),!0===this.state[n].board.recieveAttack(t,e)&&this.checkWin(n));var i=Object(c.a)({},this.state[n]);i.ships=s,this.setState(Object(o.a)({},n,i))}},{key:"newShip",value:function(t,e,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"player",s=S(t),i=this.state[n],u=i.board.get();if(r){for(var l=e;l<e+s.getLength();l++)if(!u[l]||null!==u[l][a].shipNumber)return"player"===n&&alert("Please try again! Ship cant be placed here"),!1}else for(var h=a;h<a+s.getLength();h++)if(!u[e][h]||null!==u[e][h].shipNumber)return"player"===n&&alert("Please try again! Ship cant be placed here"),!1;i.ships.push(s);var p=i.ships.indexOf(s);return i.board.placeShip(s,e,a,p,r),this.setState(Object(o.a)({},n,Object(c.a)({},i))),!0}},{key:"checkWin",value:function(t){this.state[t].ships.every((function(t){return!0===t.isSunk()}))?(t="computer"===t?"Player 1!":"Computer!",alert("Winner: "+t),this.reset()):console.log("No winner yet")}},{key:"reset",value:function(){}},{key:"startGame",value:function(){var t=Object(c.a)({},this.state.status);t.start=!0,this.setState({status:t})}},{key:"updateCurrent",value:function(){var t=Object(c.a)({},this.state.status);t.currentIndex++,this.setState({status:t})}},{key:"randomCoords",value:function(t,e){var a,r,n=Math.ceil(0),s=Math.floor(9);return e?(a=Math.floor(Math.random()*(s-t-n+2))+n,r=Math.floor(Math.random()*(s-n+1))+n):(a=Math.floor(Math.random()*(s-n+1))+n,r=Math.floor(Math.random()*(s-t-n+2))+n),[a,r]}},{key:"UNSAFE_componentWillMount",value:function(){this.setComputerShips()}},{key:"setComputerShips",value:function(){var t,e,a,r=this;w.forEach((function(n){a=!1;do{t=Math.random()>=.5,e=r.randomCoords(n,t),a=r.newShip(n,e[0],e[1],t,"computer")}while(!0!==a)}))}},{key:"render",value:function(){var t=this.state.player.board,e=this.state.computer.board;return n.a.createElement("div",null,n.a.createElement("h1",null,"Battleship"),n.a.createElement("div",{className:"gameboards"},n.a.createElement(y,{player:"player",board:t.get(),attack:this.newAttack,ships:w,place:this.newShip,startStatus:this.state.status.start,start:this.startGame,current:this.state.status.currentIndex,updateCurrent:this.updateCurrent,randomCoordinate:this.randomCoords}),n.a.createElement(y,{player:"computer",board:e.get(),attack:this.newAttack,startStatus:this.state.status.start,start:this.startGame,current:this.state.status.currentIndex,randomCoordinate:this.randomCoords})))}}]),a}(n.a.Component);C.initialState={player:{board:_(10),stats:{hits:[],misses:[]},ships:[]},computer:{board:_(10),stats:{hits:[],misses:[]},ships:[]},status:{start:!1,currentIndex:0}};var j=C;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},2:function(t,e,a){t.exports={board:"Gameboard_board__1dlBo",cell:"Gameboard_cell__2xt5C",ship:"Gameboard_ship__2iotU",hit:"Gameboard_hit__1YfQi",ocean:"Gameboard_ocean__DPWwg",Gameboard:"Gameboard_Gameboard__30J8c",readonly:"Gameboard_readonly__Cv31M",settings:"Gameboard_settings__VKzla",rotate:"Gameboard_rotate__3NMT5"}},54:function(t,e,a){t.exports=a(132)},59:function(t,e,a){},60:function(t,e,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.dd6a9a25.chunk.js.map